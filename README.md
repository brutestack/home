# Проект планировки дома — 2-й этаж и лестница

## Описание

Интерактивная визуализация планировки второго этажа частного дома и проекта лестницы с первого на второй этаж. Проект включает:

- **План 2-го этажа** — SVG-схема с интерактивными координатами при наведении мыши
- **Детали лестницы** — три вида (сверху, сбоку, разрез/развёртка) с интерактивными курсорами + спецификация
- **3D модель лестницы** — интерактивная модель на Three.js (вращение мышью, зум колесом)

### Интерактивные курсоры

Все SVG-схемы имеют интерактивный курсор с координатами:
- **План этажа** — X×Y в мм от угла комнаты
- **Вид сверху** — X×Y в мм, X отсчитывается от красной линии (50мм от края проёма)
- **Вид сбоку** — расстояние в мм от красной линии + высота от пола 1-го этажа
- **Развёртка** — примерный номер ступени + высота

## Параметры помещения

| Параметр | Значение |
|----------|----------|
| Размеры этажа | 9.4м × 5.4м |
| Высота потолков | 2.8м |
| Площадь | 50.76 м² |
| Высота между этажами (пол-пол) | 3000 мм |

### Элементы плана

| Элемент | Параметры |
|---------|-----------|
| Внутренняя стена | 3000 мм от левой стены, длина 2630 мм, толщина 250 мм |
| Колонна | 200×150 мм, на расстоянии 2240 мм от внутренней стены |
| Угловой диван | 3000×2050 мм, глубина 1050 мм, зазор от колонны 100 мм |
| Окно (верхняя стена) | 2540 мм от левой стены, ширина 1250 мм |
| Зона проводки/труб | На верхней стене, 840–1430 мм правее проёма |

## Параметры лестницы

| Параметр | Значение |
|----------|----------|
| Тип | П-образная с двухуровневой площадкой |
| Проём (Д×Ш) | 3000 × 1700 мм |
| Отступ проёма от стены | 50 мм (PLAT_X=0.05) |
| Ширина маршей | 850 мм (MARCH_W = PROEM_H/2) |
| Ширина площадок | 750 мм (PLAT_W=0.75) |

### Ступени

| Параметр | Значение |
|----------|----------|
| Всего подъёмов | 16 |
| Подступёнок (высота) | 187.5 мм |
| Проступь (глубина) | 250 мм |
| Доборная ступень | 200 мм (выход на 2-й этаж) |
| Формула комфорта 2h+b | 625 мм ✓ (норма 600–640) |
| Уклон | 36.9° |

### Структура лестницы

```
Марш 1:  5 ступеней (1250 мм) — подъём снизу вверх, направление от стены
         ↓
Площадка нижняя (подъём 6)
         ↓
Площадка верхняя (подъём 7) — разворот на 180°
         ↓
Марш 2:  8 ступеней (2000 мм) + 1 доборная (200 мм) — подъём к выходу на 2-й этаж
```

**Важно:** Доборная ступень (16-й подъём) = уровень пола 2-го этажа, её край совпадает с краем проёма.

## Константы в коде

Все параметры лестницы определены как константы в начале файлов:

```typescript
const PROEM_W = 3.0      // Ширина проёма (м)
const PROEM_H = 1.7      // Глубина проёма (м)
const PLAT_X = 0.05      // Отступ от стены (м)
const PLAT_W = 0.75      // Ширина площадки (м)
const MARCH_W = 0.85     // Ширина марша (м) = PROEM_H/2
const M1_STEPS = 5       // Ступеней в марше 1
const M2_STEPS = 8       // Ступеней в марше 2
const TREAD = 0.25       // Проступь (м)
const DOBOR_TREAD = 0.20 // Доборная ступень (м)
const TOTAL_RISES = 16   // Всего подъёмов
const RISE_H = 187.5     // Высота подступёнка (мм)
```

## Технический стек

- **React 19** + TypeScript
- **Vite** — сборщик
- **Three.js** — 3D визуализация
- **SVG** — 2D чертежи

## Структура проекта

```
/home/mx16/Work/Home/
├── src/
│   ├── App.tsx              # Главный компонент с навигацией (вкладки)
│   ├── main.tsx             # Точка входа React
│   ├── 2nd-floor-plan.tsx   # План 2-го этажа (SVG, 1000px)
│   ├── stair-detail.tsx     # Детали лестницы: TopView, SideView, SectionView (SVG, 1000px)
│   └── stair-3d.tsx         # 3D модель лестницы (Three.js, 850px)
├── index.html
├── package.json
├── tsconfig.json
├── vite.config.ts
├── .gitignore
└── README.md
```

## Запуск проекта

```bash
cd /home/mx16/Work/Home
npm install
npm run dev
```

Откроется на http://localhost:5173 (или следующий свободный порт).

## Цветовая схема визуализации

| Цвет | Элемент |
|------|---------|
| #ff9800 (оранжевый) | Ступени, проём (пунктир) |
| #ffab40 (светло-оранжевый) | Площадки |
| #4caf50 (зелёный) | Доборная ступень, выход на 2-й этаж |
| #2196f3 (синий) | Вход с 1-го этажа |
| #e74c3c (красный) | Критические размеры, линия 2м, базовая линия отсчёта (50мм от края проёма) |
| #4fc3f7 (голубой) | Размерные линии, человек (180см), окно |
| #6a5acd (фиолетовый) | Диван |
| #888888 (серый) | Колонна, размеры колонны |
| #e91e63 (розовый) | Зона проводки/труб |

## Текущее состояние

- [x] План 2-го этажа с интерактивными координатами
- [x] Вид лестницы сверху с нумерацией ступеней и размерами (проступь, площадки)
- [x] Вид лестницы сбоку с фигурой человека (180см)
- [x] Развёртка лестницы с высотными отметками
- [x] Спецификация лестницы
- [x] 3D модель с вращением и зумом
- [x] Навигация между видами (вкладки)
- [x] Интерактивные курсоры на всех SVG-схемах
- [x] Размерные линии с засечками
- [x] Координата X отсчитывается от красной линии (50мм от края проёма)
- [x] Внутренняя стена с размерными линиями
- [x] Колонна с размерами до всех стен
- [x] Угловой диван (L-форма)
- [x] Все размеры на плане в мм
- [x] Окно на верхней стене
- [x] Зона проводки/труб
